
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Ranjit: Game of Game - Car Edition</title>
<style>
  body { margin: 0; overflow: hidden; }
  canvas { display: block; }
</style>
</head>
<body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
<script>
  // Scene, Camera, Renderer
  const scene = new THREE.Scene();
  scene.background = new THREE.Color(0x87ceeb); // Sky
  const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
  const renderer = new THREE.WebGLRenderer({antialias:true});
  renderer.setSize(window.innerWidth, window.innerHeight);
  document.body.appendChild(renderer.domElement);

  const controls = new THREE.OrbitControls(camera, renderer.domElement);

  // Ground
  const groundGeometry = new THREE.PlaneGeometry(200,200);
  const groundMaterial = new THREE.MeshPhongMaterial({color: 0x228B22});
  const ground = new THREE.Mesh(groundGeometry, groundMaterial);
  ground.rotation.x = -Math.PI/2;
  scene.add(ground);

  // Car (player)
  const carGeometry = new THREE.BoxGeometry(2,1,4);
  const carMaterial = new THREE.MeshPhongMaterial({color: 0xff0000});
  const car = new THREE.Mesh(carGeometry, carMaterial);
  car.position.y = 0.5;
  scene.add(car);

  // Lights
  const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
  scene.add(ambientLight);
  const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
  directionalLight.position.set(50,50,50);
  scene.add(directionalLight);

  // Camera initial position
  camera.position.set(0,10,15);
  camera.lookAt(car.position);

  // Controls
  const keys = {};
  document.addEventListener('keydown', e => keys[e.key.toLowerCase()] = true);
  document.addEventListener('keyup', e => keys[e.key.toLowerCase()] = false);

  // Car movement variables
  let speed = 0;
  const maxSpeed = 0.5;
  const acceleration = 0.02;
  const deceleration = 0.01;
  const turnSpeed = 0.03;

  function animate() {
    requestAnimationFrame(animate);

    // Forward/Backward
    if(keys['w']) speed += acceleration;
    else if(keys['s']) speed -= acceleration;
    else {
      // natural slow down
      if(speed > 0) speed -= deceleration;
      if(speed < 0) speed += deceleration;
    }
    speed = Math.max(Math.min(speed, maxSpeed), -maxSpeed);

    // Turning
    if(keys['a']) car.rotation.y += turnSpeed * (speed/maxSpeed);
    if(keys['d']) car.rotation.y -= turnSpeed * (speed/maxSpeed);

    // Move car
    car.position.x -= Math.sin(car.rotation.y) * speed;
    car.position.z -= Math.cos(car.rotation.y) * speed;

    // Camera follow
    camera.position.x = car.position.x + Math.sin(car.rotation.y + Math.PI/2)*10;
    camera.position.z = car.position.z + Math.cos(car.rotation.y + Math.PI/2)*10;
    camera.position.y = car.position.y + 6;
    camera.lookAt(car.position);

    renderer.render(scene, camera);
  }
  animate();
</script>
</body>
</html>
